<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magnata Músicas - MTA:SA</title>
    <meta name="google-site-verification" content="frqsM4oYp-xdlFS6aDTpbw3tz6LK9_BNkcZrGSB2XMs" />
    <meta name="description" content="Magnata Músicas - Pesquise, ouça e compartilhe músicas no seu servidor MTA:SA. Rápido, grátis e sem complicação.">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QFXEJN1QXW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QFXEJN1QXW');
</script>
    
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="#inicio" class="nav-logo">
                <span class="logo-text">Magnata Músicas</span></span>
            </a>
            <button class="nav-toggle" id="navToggle" type="button" aria-label="Menu">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="#inicio" class="nav-link active">Início</a></li>
                <li><a href="#" class="nav-link">Em Breve</a></li>
                <li><a href="#" class="nav-link">Em Breve</a></li>
                <li><a href="#" class="nav-link">Em Breve</a></li>
            </ul>
        </div>
    </nav>

    <section class="hero" id="inicio">
        <div class="hero-container">
            <div class="hero-badge">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#9b7aff" stroke-width="2">
                    <path d="M9 18V5l12-2v13"></path>
                    <circle cx="6" cy="18" r="3"></circle>
                    <circle cx="18" cy="16" r="3"></circle>
                </svg>
                <span>Plataforma de Música para MTA:SA</span>
            </div>
            <h1 class="hero-title">Sua música favorita está na</h1>
            <h2 class="hero-brand">Magnata Músicas</h2>
            <p class="hero-description">
                O jeito mais fácil de adicionar música ao seu servidor.
                Busque, teste e copie o link em poucos cliques.
            </p>
            <div class="search-wrapper">
                <div class="search-box">
                    <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="M21 21l-4.35-4.35"></path>
                    </svg>
                    <input type="text" class="search-input" id="searchInput" placeholder="Busque pelo nome da música ou cole um link aqui...">
                    <button class="search-btn" id="searchBtn" type="button">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="M21 21l-4.35-4.35"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="hero-stats">
                <div class="stat-item">
                    <span class="stat-number">10K+</span>
                    <span class="stat-label">Músicas</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item">
                    <span class="stat-number">0.5s</span>
                    <span class="stat-label">Tempo de busca</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item">
                    <span class="stat-number">100%</span>
                    <span class="stat-label">Gratuito</span>
                </div>
            </div>
        </div>
        <div class="hero-bg-decoration">
            <div class="decoration-circle circle-1"></div>
            <div class="decoration-circle circle-2"></div>
            <div class="decoration-circle circle-3"></div>
        </div>
    </section>

    <section class="steps-section">
        <div class="steps-container">
            <h3 class="steps-title">Como funciona?</h3>
            <p class="steps-subtitle">Em apenas 3 passos simples</p>
            <div class="steps-wrapper">
                <div class="step-card">
                    <div class="step-number"><span>1</span></div>
                    <div class="step-icon-wrapper">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#9b7aff" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="M21 21l-4.35-4.35"></path>
                        </svg>
                    </div>
                    <h4 class="step-card-title">Encontre sua música</h4>
                    <p class="step-card-desc">Busque pelo nome ou cole um link do YouTube</p>
                </div>
                <div class="step-connector">
                    <svg width="40" height="24" viewBox="0 0 40 24" fill="none">
                        <path d="M0 12H36M36 12L28 4M36 12L28 20" stroke="#9b7aff" stroke-width="2" stroke-linecap="round"></path>
                    </svg>
                </div>
                <div class="step-card">
                    <div class="step-number"><span>2</span></div>
                    <div class="step-icon-wrapper">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#9b7aff" stroke-width="2">
                            <polygon points="5 3 19 12 5 21 5 3"></polygon>
                        </svg>
                    </div>
                    <h4 class="step-card-title">Teste agora</h4>
                    <p class="step-card-desc">Ouça a música e confirme que é a música certa</p>
                </div>
                <div class="step-connector">
                    <svg width="40" height="24" viewBox="0 0 40 24" fill="none">
                        <path d="M0 12H36M36 12L28 4M36 12L28 20" stroke="#9b7aff" stroke-width="2" stroke-linecap="round"></path>
                    </svg>
                </div>
                <div class="step-card">
                    <div class="step-number"><span>3</span></div>
                    <div class="step-icon-wrapper">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#9b7aff" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2"></rect>
                            <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                        </svg>
                    </div>
                    <h4 class="step-card-title">Copiar link</h4>
                    <p class="step-card-desc">Copie o link e use diretamente no seu servidor</p>
                </div>
            </div>
        </div>
    </section>

    <section class="results-section" id="resultados">
        <div class="results-container">
            <div class="section-header">
                <h3 class="section-title" id="resultsTitle">Resultados da Busca</h3>
                <p class="section-subtitle" id="resultsSubtitle">Use o campo acima para encontrar músicas</p>
            </div>
            <div class="music-list" id="musicList">
                <div class="empty-state" id="emptyState">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#9b7aff" stroke-width="1.5">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="M21 21l-4.35-4.35"></path>
                    </svg>
                    <h4>Aguardando pesquisa...</h4>
                    <p>Digite o nome da música e clique em buscar</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
    <div class="footer-container">
        <div class="footer-bottom">
            <p>© 2025 - 2026 Magnata Músicas. Todos os direitos reservados.</p>
        </div>
    </div>
</footer>

    <div class="notification" id="notification"></div>

    <script>
        /* =========================================
           TODA A LÓGICA - DIRETO NO HTML
           Mesma abordagem do site original
           ========================================= */

        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const musicListContainer = document.getElementById('musicList');
        const emptyState = document.getElementById('emptyState');
        const resultsSection = document.getElementById('resultados');
        const resultsTitle = document.getElementById('resultsTitle');
        const resultsSubtitle = document.getElementById('resultsSubtitle');
        const notification = document.getElementById('notification');
        const navbar = document.getElementById('navbar');
        const navToggle = document.getElementById('navToggle');
        const navMenu = document.getElementById('navMenu');

        let currentMusicList = [];
        const SITE_ORIGIN = window.location.origin;

        /* =========================================
           SEARCH - Igual ao original
           ========================================= */
        searchBtn.addEventListener('click', searchMusic);
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') searchMusic();
        });

        function searchMusic() {
            const term = searchInput.value.trim();
            if (!term) return;

            musicListContainer.innerHTML = `
                <div class="loading-state">
                    <div class="spinner"></div>
                    <p>Buscando músicas...</p>
                </div>
            `;
            resultsTitle.textContent = 'Buscando...';
            resultsSubtitle.textContent = '';

            resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });

            fetch(`https://api-music.fantasyresources.net/search?src=${encodeURIComponent(term)}`)
                .then(r => r.json())
                .then(data => {
                    currentMusicList = data;
                    displayMusicList(data, term);
                })
                .catch(e => {
                    console.error(e);
                    musicListContainer.innerHTML = `
                        <div class="empty-state">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#9b7aff" stroke-width="1.5">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 8v4"></path>
                                <path d="M12 16h.01"></path>
                            </svg>
                            <h4>Erro na conexão</h4>
                            <p>Verifique sua internet e tente novamente</p>
                        </div>
                    `;
                    resultsTitle.textContent = 'Erro na busca';
                    resultsSubtitle.textContent = '';
                });
        }

        /* =========================================
           DISPLAY MUSIC LIST - Igual ao original
           ========================================= */
        function displayMusicList(list, term) {
            if (!list || list.length === 0) {
                musicListContainer.innerHTML = `
                    <div class="empty-state">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#9b7aff" stroke-width="1.5">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="M21 21l-4.35-4.35"></path>
                            <path d="M8 11h6"></path>
                        </svg>
                        <h4>Nenhuma música encontrada</h4>
                        <p>Tente buscar com outro termo</p>
                    </div>
                `;
                resultsTitle.textContent = 'Resultados da Busca';
                resultsSubtitle.textContent = `Nenhum resultado para "${term}"`;
                return;
            }

            resultsTitle.textContent = 'Resultados da Busca';
            resultsSubtitle.textContent = `${list.length} música${list.length !== 1 ? 's' : ''} encontrada${list.length !== 1 ? 's' : ''} para "${term}"`;

            musicListContainer.innerHTML = '';

            list.forEach((m, idx) => {
                const card = document.createElement('div');
                card.className = 'music-card';
                card.dataset.index = idx;
                card.dataset.id = m.id;

                const thumb = m.richThumb || `https://img.youtube.com/vi/${m.id}/mqdefault.jpg`;

                card.innerHTML = `
                    <div class="music-card-left">
                        <div class="music-rank">#${idx + 1}</div>
                        <div class="music-cover">
                            <img src="${thumb}" alt="${escapeHTML(m.title)}">
                            <div class="cover-overlay">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                            </div>
                        </div>
                        <div class="music-info">
                            <h4 class="music-title">${escapeHTML(m.title)}</h4>
                            <p class="music-artist">${escapeHTML(m.author)}</p>
                            <p class="music-duration">${m.duration_view || formatTime(m.duration)}</p>
                        </div>
                    </div>
                    <div class="music-card-right">
                        <button class="action-btn" data-action="open" data-id="${m.id}" type="button">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                            <span class="btn-tooltip">Abrir música</span>
                        </button>
                        <button class="action-btn" data-action="bass" data-id="${m.id}" type="button">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 13a2 2 0 0 0 2-2V7a2 2 0 0 1 4 0v13a2 2 0 0 0 4 0V4a2 2 0 0 1 4 0v13a2 2 0 0 0 4 0v-4a2 2 0 0 1 2-2"></path></svg>
                            <span class="btn-tooltip">Link com grave</span>
                        </button>
                        <button class="action-btn" data-action="copy" data-id="${m.id}" type="button">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path></svg>
                            <span class="btn-tooltip">Copiar link</span>
                        </button>
                    </div>
                `;

                // Clicar na capa abre a música
                card.querySelector('.music-cover').addEventListener('click', (e) => {
                    e.stopPropagation();
                    openMusic(m.id);
                });

                musicListContainer.appendChild(card);
            });
        }

        /* =========================================
           ACTIONS - Abrir, Copiar link, Copiar bass
           Mesma lógica do original
           ========================================= */

        // Event delegation pra todos os botões de ação
        document.addEventListener('click', (e) => {
            const btn = e.target.closest('[data-action]');
            if (!btn) return;

            const action = btn.getAttribute('data-action');
            const id = btn.getAttribute('data-id');
            if (!action || !id) return;

            e.preventDefault();
            e.stopPropagation();

            switch (action) {
                case 'open':
                    openMusic(id);
                    break;
                case 'copy':
                    copyMusicLink(id);
                    break;
                case 'bass':
                    copyBassLink(id);
                    break;
            }
        });

        // Abre a música direto na API (nova guia)
        function openMusic(id) {
            window.open(`https://api-music.fantasyresources.net/play-client?id=${id}`, '_blank');
        }

        // Copia link personalizado (passa pelo play.js do Vercel)
        // Igual ao copyMusicLink do original
        function copyMusicLink(id) {
            const url = `setradio ${SITE_ORIGIN}/api/play?id=${id}`;
            navigator.clipboard.writeText(url).then(() => {
                showNotification('Link da música copiado!');
            }).catch(() => {
                fallbackCopy(url, 'Link da música copiado!');
            });
        }

        // Copia link com grave (passa pelo play.js do Vercel)
        // Igual ao original com bass=true&level=2
        function copyBassLink(id) {
            const url = `setradio ${SITE_ORIGIN}/api/play?id=${id}&bass=true&level=2`;
            navigator.clipboard.writeText(url).then(() => {
                showNotification('Link com grave copiado!');
            }).catch(() => {
                fallbackCopy(url, 'Link com grave copiado!');
            });
        }

        // Fallback para navegadores sem clipboard API
        function fallbackCopy(text, msg) {
            const ta = document.createElement('textarea');
            ta.value = text;
            ta.style.cssText = 'position:fixed;left:-9999px;top:-9999px;opacity:0';
            document.body.appendChild(ta);
            ta.focus();
            ta.select();
            try {
                document.execCommand('copy');
                showNotification(msg);
            } catch (e) {
                showNotification('Erro ao copiar.');
            }
            document.body.removeChild(ta);
        }

        /* =========================================
           NOTIFICATION - Igual ao original
           ========================================= */
        function showNotification(msg) {
            notification.textContent = msg;
            notification.classList.add('show');
            setTimeout(() => notification.classList.remove('show'), 3000);
        }

        /* =========================================
           HELPERS
           ========================================= */
        function formatTime(s) {
            if (!s || isNaN(s)) return '0:00';
            const m = Math.floor(s / 60);
            const sec = Math.floor(s % 60);
            return `${m}:${sec < 10 ? '0' : ''}${sec}`;
        }

        function escapeHTML(str) {
            const div = document.createElement('div');
            div.appendChild(document.createTextNode(str));
            return div.innerHTML;
        }

        /* =========================================
           NAVBAR
           ========================================= */
        window.addEventListener('scroll', () => {
            navbar.classList.toggle('scrolled', window.scrollY > 10);
        });

        navToggle.addEventListener('click', () => {
            navToggle.classList.toggle('active');
            navMenu.classList.toggle('open');
            document.body.style.overflow = navMenu.classList.contains('open') ? 'hidden' : '';
        });

        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                navToggle.classList.remove('active');
                navMenu.classList.remove('open');
                document.body.style.overflow = '';
            });
        });

        // Active nav on scroll
        const sections = document.querySelectorAll('section[id], footer[id]');
        const navLinks = document.querySelectorAll('.nav-link');
        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(s => {
                if (window.scrollY >= s.offsetTop - 120) current = s.getAttribute('id');
            });
            navLinks.forEach(l => {
                l.classList.toggle('active', l.getAttribute('href') === '#' + current);
            });
        });

        /* =========================================
           SCROLL ANIMATIONS
           ========================================= */
        if ('IntersectionObserver' in window) {
            const obs = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                        obs.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

            document.querySelectorAll('.step-card').forEach(el => {
                el.classList.add('animate-hidden');
                obs.observe(el);
            });
        }

    </script>
</body>
</html>
